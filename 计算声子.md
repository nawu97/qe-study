# 以Si为例来讨论在Gamma点处的声子
## Step1.自洽计算电子密度和Kohn-Sham轨道
### Si.scf.in文件具体为：
```
 &control
    calculation='scf'
    restart_mode='from_scratch',
    !pseudo_dir='directory where pseudopotentials are stored/',
    !outdir='directory where large files are written/'
    outdir='./tmp',
    pseudo_dir='./',
    prefix='SIPH'
 /
 &system    
    ibrav=2, celldm(1)=10.20, nat=2, ntyp=1,
    ecutwfc =16.0
 /
 &electrons
    conv_thr =  1.0d-8
    mixing_beta = 0.7
 /
ATOMIC_SPECIES
 Si  28.0855 Si.pz-vbc.UPF
ATOMIC_POSITIONS alat
 Si 0.00 0.00 0.00 
 Si 0.25 0.25 0.25 
K_POINTS tpiba
   10
    0.1250000  0.1250000  0.1250000   1.00
    0.1250000  0.1250000  0.3750000   3.00
    0.1250000  0.1250000  0.6250000   3.00
    0.1250000  0.1250000  0.8750000   3.00
    0.1250000  0.3750000  0.3750000   3.00
    0.1250000  0.3750000  0.6250000   6.00
    0.1250000  0.3750000  0.8750000   6.00
    0.1250000  0.6250000  0.6250000   3.00
    0.3750000  0.3750000  0.3750000   1.00
    0.3750000  0.3750000  0.6250000   3.0
```
## Step2.计算在特殊点处的声子

### 特殊 q=（0，0，0）点处
Si.phG.in文件具体为：
```
Phonons of Si at Gamma
 &inputph
  tr2_ph=1.0d-14,
  amass(1)=28.0855, ！质量与scf输出的结果一致
  prefix='SIPH',
  !outdir='directory where large files are written/' 
  outdir='./tmp'
  fildyn='si.dynG', ！outdir与prefix必须与scf过程中的一致
  epsil=.true. ！true表示非金属q=0的计算，即计算系统的宏观介电常数；如果系统为非金属或者q≠0，设置为false
 /
 0.0 0.0 0.0   ！表示计算的k点
```
### 上一步输出`Si.dynG`
利用`dynamt.x`来生成可视化的xcrysden文件
先准备一个si.dynatm.in文件：
```
&input 
fildyn='si.dynG' 
/
```
命令有：`dynamt.x si.dynatm.in`生成.mold文件和.axsf文件

# Step3.计算在一般点处的声子
## 在一般q点（非零处）声子计算需要构造k处和k+q处的电子态进行非自洽计算，
以下以q=(1,0,0)2pi/a为例进行讨论

### 1） 运行Si的自洽计算

### 2） 计算q=(1,0,0)2pi/a处的声子
这一部分是线性响应计算，不可约表示的数目和简并度都不同于q=(0,0,0),依赖于对称性，即
#### q点的小群，si.dynX包含三个矩阵也就是三个等价的X点
类似Si.phG.in文件，改写Si.phX.in，具体为：
```
Phonons of Si at X
 &inputph
  tr2_ph=1.0d-14,
  amass(1)=28.0855, ！质量与scf输出的结果一致
  prefix='SIPH',
  !outdir='directory where large files are written/' 
  outdir='./tmp'
  fildyn='si.dynX', ！outdir与prefix必须与scf过程中的一致,这里"si.dynG" -> "si.dynX"
  epsil=.true. ！true表示非金属q=0的计算，即计算系统的宏观介电常数；如果系统为非金属或者q≠0，设置为false
 /
 1.0 0.0 0.0   ！表示计算的k点，重新定义q点
```
### 3） 执行
```
ph.x -in si.phX.in > si.phX.out
```
### 注意事项：
1）L point = (0.5,0.5,0.5) 2pi/a重复上述步骤即可
2）可利用：`grep omega si.dyn*`发现差异

## 电场和声学求和规则
（考虑Gamma点处的情形）

